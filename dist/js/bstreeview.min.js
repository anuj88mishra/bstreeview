/*! @preserve
 * bstreeview.js
 * Version: 1.2.2
 * Authors: Sami CHNITER <sami.chniter@gmail.com>
 * Copyright 2020
 * License: Apache License 2.0
 *
 * Project: https://github.com/chniter/bstreeview
 * Project: https://github.com/nhmvienna/bs5treeview (bootstrap 5)
 */
!function(t,e,i,s){"use strict";var n="bstreeview",a={expandIcon:"fa fa-angle-down fa-fw",collapseIcon:"fa fa-angle-right fa-fw",expandClass:"show",indent:1.25,parentsMarginLeft:"1.25rem",openNodeLinkOnNewTab:!0},d='<div class="row"></div>',o='<div role="treeitem" class="list-group-item col-9" data-bs-toggle="collapse"></div>',r='<div class="col-3"></div>',l='<div role="group" class="list-group collapse" id="itemid"></div>',c='<i class="state-icon"></i>',p='<i class="item-icon"></i>';function g(e,i){this.element=e,this.itemIdPrefix=e.id+"-item-",this.settings=t.extend({},a,i),this.init()}t.extend(g.prototype,{init:function(){this.tree=[],this.nodes=[],this.settings.data&&(this.settings.data.isPrototypeOf(String)&&(this.settings.data=t.parseJSON(this.settings.data)),this.tree=t.extend(!0,[],this.settings.data),delete this.settings.data),t(this.element).addClass("bstreeview"),this.initData({nodes:this.tree});var i=this;this.build(t(this.element),this.tree,0),t(this.element).on("click",".list-group-item",(function(s){t(".state-icon",this).toggleClass(i.settings.expandIcon).toggleClass(i.settings.collapseIcon),s.target.hasAttribute("href")?i.settings.openNodeLinkOnNewTab?e.open(s.target.getAttribute("href"),"_blank"):e.location=s.target.getAttribute("href"):t(t(this).attr("data-bs-target")).collapse("toggle")}))},initData:function(e){if(e.nodes){var i=e,s=this;t.each(e.nodes,(function(t,e){e.nodeId=s.nodes.length,e.parentId=i.nodeId,s.nodes.push(e),e.nodes&&s.initData(e)}))}},build:function(e,i,s){var n=this,a=n.settings.parentsMarginLeft;s>0&&(a=(n.settings.indent+s*n.settings.indent).toString()+"rem;"),s+=1,t.each(i,(function(i,g){var h=t(d),f=t(r);g.action&&f.append(g.action);var u=t(o).attr("data-bs-target","#"+n.itemIdPrefix+g.nodeId).attr("style","padding-left:"+a).attr("aria-level",s);if(g.nodes){var v=t(c).addClass(g.expanded?n.settings.expandIcon:n.settings.collapseIcon);u.append(v)}if(g.icon){var m=t(p).addClass(g.icon);u.append(m)}if(u.append(g.text),g.href&&u.attr("href",g.href),g.class&&u.addClass(g.class),g.id&&u.attr("id",g.id),h.append(u),h.append(f),e.append(h),g.nodes){var b=t(l).attr("id",n.itemIdPrefix+g.nodeId);e.append(b),n.build(b,g.nodes,s),g.expanded&&b.addClass(n.settings.expandClass)}}))}}),t.fn[n]=function(e){return this.each((function(){t.data(this,"plugin_"+n)||t.data(this,"plugin_"+n,new g(this,e))}))}}(jQuery,window,document);